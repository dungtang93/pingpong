<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/pixi-pack/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"/pixi-pack",preloaded:[void 0,null,{post:{title:"Basic structure",slug:"basic-structure",html:"\n\u003Cp\u003ETwo main parts:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\t\u003Cli\u003EThe \u003Cb\u003Egame\u003C\u002Fb\u003E part (PIXI & Matter)\u003C\u002Fli\u003E\n\t\u003Cli\u003EThe \u003Cb\u003Eother stuff\u003C\u002Fb\u003E part (Sapper)\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EThe game includes: \u003Ccode\u003Egame.ts\u003C\u002Fcode\u003E,\u003Ccode\u003Egame_config.ts\u003C\u002Fcode\u003E & the bunch of \u003Ci\u003Egame objects\u003C\u002Fi\u003E inside \u003Ccode\u003E\u002Fsrc\u002Fgame\u003C\u002Fcode\u003E folder\u003C\u002Fp\u003E\n\u003Cul\u003E\n\t\u003Cli\u003E\n\t\t\u003Cdetails\u003E\n\t\t\t\u003Csummary\u003E\u003Ccode\u003Egame.ts\u003C\u002Fcode\u003E specifies the basic layout: a canvas container & the \u003Ci\u003Egame objects\u003C\u002Fi\u003E\u003C\u002Fsummary\u003E\n\t\t\t\u003Cpre\u003E\u003Ccode\u003E\nnew Container({\n\tview: canvas, \u002F\u002F the canvas element to draw the game on\n\tbuilder: (app, { topId, bottomId }) =\u003E [\n\t\tnew Background(app),\n\t\tnew Ball({ app: app, name: 'ball', onCollisionCallback: (otherBody) =\u003E ... }),\n\t\tnew Paddle({ app: app, name: 'paddle-top' }),\n\t\tnew Paddle({ app: app, name: 'paddle-bottom' })\n\t]\n})\n\t\t\t\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\t\t\u003C\u002Fdetails\u003E\n\t\u003C\u002Fli\u003E\n\n\t\u003Cli\u003E\n\t\t\u003Ccode\u003Egame_config.ts\u003C\u002Fcode\u003E contains defaults for canvas width, height & physics stuff such as friction, inertia...\n\t\u003C\u002Fli\u003E\n\n\t\u003Cli\u003E\n\t\t\u003Cdetails\u003E\n\t\t\t\u003Csummary\u003E\u003Ci\u003EGame objects\u003C\u002Fi\u003E should extends \u003Ccode\u003Esrc\u002Fgame\u002Fapp\u002FGameObject.ts\u003C\u002Fcode\u003E parent class & be included in \u003Ccode\u003Egame.ts\u003C\u002Fcode\u003E\u003C\u002Fsummary\u003E\n\t\t\t\u003Cpre\u003E\u003Ccode\u003E\nclass Ball extends GameObject \u002F\u002F basic\nclass Ball extends Materialized(GameObject) \u002F\u002F \"materialize\" it and include in physics world, trigger onCollisionCallback\nclass Ball extends Interactive(Materialized(GameObject)) \u002F\u002F subscribe to key press events\n\t\t\t\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\t\t\u003C\u002Fdetails\u003E\n\t\u003C\u002Fli\u003E\n\n\t\u003Cli\u003E\n\t\tThere are two game loops (exposed as \u003Ccode\u003Eupdate(_delta: time)\u003C\u002Fcode\u003E & \u003Ccode\u003EfixedUpdate(_delta: time)\u003C\u002Fcode\u003E)\n\t\t\t\u003Cul\u003E\n\t\t\t\t\u003Cli\u003E\n\t\t\t\t\t\u003Ccode\u003Eupdate()\u003C\u002Fcode\u003E does not have FPS cap, there more refresh rate your monitor have, the lower \u003Ccode\u003E_delta\u003C\u002Fcode\u003E goes\n\t\t\t\t\u003C\u002Fli\u003E\n\t\t\t\t\u003Cli\u003E\n\t\t\t\t\t\u003Ccode\u003EfixedUpdate()\u003C\u002Fcode\u003E have FPS cap of \u003Ci\u003E60FPS\u003C\u002Fi\u003E, \u003Ccode\u003E_delta\u003C\u002Fcode\u003E will stay closely to 1.0 as it can; you should put logics & physics-related codes inside this loop (this is to prevents\n\t\t\t\t\thaving objects on 144Hz monitor move more quickly than a 60Hz one)\n\t\t\t\t\u003C\u002Fli\u003E\n\t\t\t\u003C\u002Ful\u003E\n\t\u003C\u002Fli\u003E\n\n\t\u003Cli\u003E\n\t\t\u003Cdetails\u003E\n\t\t\t\u003Csummary\u003ESome already-made interfaces that a \u003Ci\u003EGame object\u003C\u002Fi\u003E can implements to simplify codes\u003C\u002Fsummary\u003E\n\t\t\t\u003Cpre\u003E\u003Ccode\u003E\n\u002F\u002F A game object can implement \"Shapeable\" interface & \"requiredGraphics\" method,\n\u002F\u002F it requires a PIXI Graphics instance to draw onto the canvas stage\nclass Ball extends GameObject implements Shapeable {\n  requireGraphics(): Graphics {\n    const [x, y, radius] = [100, 100, 6]\n    \u002F\u002Fdraw a circle\n    return new Graphics().beginFill(0xFFFFFF).drawCircle(x, y, radius).endFill()\n  }\n}\n\t\t\t\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\t\t\u003C\u002Fdetails\u003E\n\t\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\n\u003Cp\u003EThe other stuffs (such as this block of texts) are handled by Svelte\u003C\u002Fp\u003E\n\n\u003Cp\u003ETo bridge events generated from canvas to Svelte components, we can use \u003Ccode\u003EEventEmitter\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\t\t"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/pixi-pack/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/pixi-pack/client/client.65495f12.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/pixi-pack/client/shimport@2.0.4.js";s.setAttribute("data-main","/pixi-pack/client/client.65495f12.js")}document.head.appendChild(s)</script> <link href=client/client-618ecb26.css rel=stylesheet><link href=client/[slug]-5bc8f95f.css rel=stylesheet> <title>Basic structure</title> <link href=/pixi-pack/client/client.65495f12.js rel=modulepreload as=script crossorigin=use-credentials><link href=/pixi-pack/client/client-618ecb26.css rel=preload as=style><link href=/pixi-pack/client/[slug].fd76b550.js rel=modulepreload as=script crossorigin=use-credentials><link href=/pixi-pack/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/pixi-pack/client/[slug]-5bc8f95f.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1dbd5up><ul class=svelte-1dbd5up><li class=svelte-1dbd5up><a class=svelte-1dbd5up href=.>home</a></li> <li class=svelte-1dbd5up><a class=svelte-1dbd5up href=blog aria-current=page rel=prefetch>blog</a></ul></nav> <main class=svelte-x9ygcy> <div class="svelte-x9ygcy game-area"><div class="circle svelte-14upwad" style=--size:60px;--color:#FF3E00;--duration:0.75s></div> <canvas height=600 hidden width=330></canvas> <canvas height=600 hidden width=330></canvas></div> <div></div> <div><h1>Basic structure</h1> <div class="content svelte-emm3f3"> <p>Two main parts:</p> <ul> <li>The <b>game</b> part (PIXI & Matter)</li> <li>The <b>other stuff</b> part (Sapper)</li> </ul> <p>The game includes: <code>game.ts</code>,<code>game_config.ts</code> & the bunch of <i>game objects</i> inside <code>/src/game</code> folder</p> <ul> <li> <details> <summary><code>game.ts</code> specifies the basic layout: a canvas container & the <i>game objects</i></summary> <pre><code>
new Container({
	view: canvas, // the canvas element to draw the game on
	builder: (app, { topId, bottomId }) => [
		new Background(app),
		new Ball({ app: app, name: 'ball', onCollisionCallback: (otherBody) => ... }),
		new Paddle({ app: app, name: 'paddle-top' }),
		new Paddle({ app: app, name: 'paddle-bottom' })
	]
})
			</code></pre> </details> </li> <li> <code>game_config.ts</code> contains defaults for canvas width, height & physics stuff such as friction, inertia... </li> <li> <details> <summary><i>Game objects</i> should extends <code>src/game/app/GameObject.ts</code> parent class & be included in <code>game.ts</code></summary> <pre><code>
class Ball extends GameObject // basic
class Ball extends Materialized(GameObject) // "materialize" it and include in physics world, trigger onCollisionCallback
class Ball extends Interactive(Materialized(GameObject)) // subscribe to key press events
			</code></pre> </details> </li> <li> There are two game loops (exposed as <code>update(_delta: time)</code> & <code>fixedUpdate(_delta: time)</code>) <ul> <li> <code>update()</code> does not have FPS cap, there more refresh rate your monitor have, the lower <code>_delta</code> goes </li> <li> <code>fixedUpdate()</code> have FPS cap of <i>60FPS</i>, <code>_delta</code> will stay closely to 1.0 as it can; you should put logics & physics-related codes inside this loop (this is to prevents having objects on 144Hz monitor move more quickly than a 60Hz one) </li> </ul> </li> <li> <details> <summary>Some already-made interfaces that a <i>Game object</i> can implements to simplify codes</summary> <pre><code>
// A game object can implement "Shapeable" interface & "requiredGraphics" method,
// it requires a PIXI Graphics instance to draw onto the canvas stage
class Ball extends GameObject implements Shapeable {
  requireGraphics(): Graphics {
    const [x, y, radius] = [100, 100, 6]
    //draw a circle
    return new Graphics().beginFill(0xFFFFFF).drawCircle(x, y, radius).endFill()
  }
}
			</code></pre> </details> </li> </ul> <p>The other stuffs (such as this block of texts) are handled by Svelte</p> <p>To bridge events generated from canvas to Svelte components, we can use <code>EventEmitter</code></p> </div></div></main></div> 